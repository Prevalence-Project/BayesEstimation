"0","# simulate one stratum data for one county for one year"
"0","DataSim <- function(N,p_OUD,p_DNM,p_U,tau_DMTb,tau_DMT,lambda){"
"0","  n_OUD <- N*p_OUD"
"0","  p_DM <- p_OUD-p_DNM-p_U"
"0","  n_DM <- N*p_DM"
"0","  n_DMTb <- rpois(1,n_DM*tau_DMTb)"
"0","  n_DMNT <- rpois(1,n_DM*(1-tau_DMT))"
"0","  while(n_DMTb+n_DMNT>n_DM){"
"0","    n_DMNT <- rpois(1,n_DM*(1-tau_DMT))"
"0","  } # n_DMTb + n_DMNT needs to be less than n_DM"
"0","  p_DMT <- 1-n_DMNT/n_DM"
"0","  p_DMTb <- n_DMTb/n_DM"
"0","  "
"0","  n_DNM <- N*p_DNM"
"0","  n_DNMTb <- rpois(1,n_DNM*tau_DMTb) # assumptions of tau's"
"0","  n_DNMNT <- rpois(1,n_DNM*(1-tau_DMT))"
"0","  while(n_DNMNT+n_DNMTb>n_DNM){"
"0","    n_DNMNT <- rpois(1,n_DNM*(1-tau_DMT))"
"0","  } # n_DNMNT+n_DNMTb needs to be less than n_DNM"
"0","  "
"0","  n_Tb <- n_DMTb+n_DNMTb"
"0","  p_Tb <- n_Tb/N # get p_Tb"
"0","  n_NT <- n_DMNT+n_DNMNT+N*p_U"
"0","  n_ODF <- rpois(1,n_NT*lambda) # get n_ODF"
"0","  "
"0","  return(list(p_DM=p_DM,p_DMTb=p_DMTb,p_DMT=p_DMT,p_Tb=p_Tb,n_ODF=n_ODF))"
"0","}   "
"0",""
